<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Liga Fantasy - LaLiga</title>
  <link rel="icon" type="image/png" href="imagenes\LogoLaLigaSinFondo.png">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white">

<!-- T√≠tulo principal con im√°genes en l√≠nea -->
<header class="py-6 shadow-lg bg-black flex justify-center items-center gap-3">
  <img src="imagenes/LogoFantasySinFondo.png" 
       alt="Logo Fantasy sin fondo" 
       class="max-w-full h-24 md:h-32 lg:h-40">
</header>

<!-- Barra de navegaci√≥n con dropdown -->
<nav class="bg-red-600 text-white py-3 flex justify-center shadow-md relative">
  <div class="relative">
    <!-- Bot√≥n principal -->
    <button onclick="toggleMenu()" class="px-4 py-2 rounded font-semibold bg-red-700 hover:bg-red-500">
      Men√∫ ‚ñæ
    </button>

    <!-- Men√∫ desplegable -->
    <div id="dropdownMenu" class="absolute left-0 mt-2 w-40 bg-red-700 rounded shadow-lg hidden">
      <button onclick="showSection('clasificacion', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Clasificaci√≥n Fantasy</button>
      <button onclick="showSection('jornadas', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Jornadas</button>
      <button onclick="showSection('reglamento', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Reglamento</button>
      <button onclick="showSection('estadisticas', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Estadisticas</button>
      <button onclick="showSection('clasificacionLaLiga', this)" class="block w-full text-left px-4 py-2 hover:bg-red-500">Clasificaci√≥n LALIGA</button>


    </div>
  </div>
</nav>


  <main class="max-w-6xl mx-auto px-4 py-6 space-y-8">
<!-- Reglamento -->
<section id="reglamento" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">

<h2 class="text-2xl font-semibold mb-4 text-red-400">Tabla de f√≥rmulas de puntuaci√≥n de los jugadores</h2><div class="overflow-x-auto my-6">
  <table class="table-auto border-collapse border border-gray-600 w-full text-sm text-left text-gray-300">
    <thead class="bg-red-700 text-white">
      <tr>
        <th class="border border-gray-600 px-3 py-2">PAR√ÅMETRO</th>
        <th class="border border-gray-600 px-3 py-2">CONDICI√ìN</th>
        <th class="border border-gray-600 px-3 py-2">PUNTOS</th>
      </tr>
    </thead>
    <tbody>
      <!-- Puntuaciones b√°sicas -->
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Minutos Jugados</td>
        <td class="border px-3 py-2">&lt; 60 min</td>
        <td class="border px-3 py-2">1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Minutos Jugados</td>
        <td class="border px-3 py-2">&gt; 60 min</td>
        <td class="border px-3 py-2">2</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Gol Portero / Defensa</td>
        <td class="border px-3 py-2">PT / DF</td>
        <td class="border px-3 py-2">6</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Gol Mediocentro</td>
        <td class="border px-3 py-2">MC</td>
        <td class="border px-3 py-2">5</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Gol Delantero</td>
        <td class="border px-3 py-2">DC</td>
        <td class="border px-3 py-2">4</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Asistencia de Gol</td>
        <td class="border px-3 py-2">√öltimo pase que provoca un gol</td>
        <td class="border px-3 py-2">3</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Asistencias sin Gol</td>
        <td class="border px-3 py-2">√öltimo pase que provoca una ocasi√≥n de gol manifiesta</td>
        <td class="border px-3 py-2">1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Porter√≠a a cero (Portero)</td>
        <td class="border px-3 py-2">Habiendo jugado &gt; 60 min</td>
        <td class="border px-3 py-2">4</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Porter√≠a a cero (Defensa)</td>
        <td class="border px-3 py-2">Habiendo jugado &gt; 60 min</td>
        <td class="border px-3 py-2">3</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Porter√≠a a cero (Mediocentro)</td>
        <td class="border px-3 py-2">Habiendo jugado &gt; 60 min</td>
        <td class="border px-3 py-2">2</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Porter√≠a a cero (Delantero)</td>
        <td class="border px-3 py-2">Habiendo jugado &gt; 60 min</td>
        <td class="border px-3 py-2">1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Penalti fallado</td>
        <td class="border px-3 py-2">Indistintamente de la demarcaci√≥n</td>
        <td class="border px-3 py-2">-2</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Penalti parado</td>
        <td class="border px-3 py-2">El portero intercede en la detenci√≥n</td>
        <td class="border px-3 py-2">5</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Penalti provocado</td>
        <td class="border px-3 py-2">Indistintamente de la demarcaci√≥n</td>
        <td class="border px-3 py-2">2</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Penalti cometido</td>
        <td class="border px-3 py-2">Indistintamente de la demarcaci√≥n</td>
        <td class="border px-3 py-2">-2</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Goles recibidos Portero/Defensa</td>
        <td class="border px-3 py-2">Cada 2</td>
        <td class="border px-3 py-2">-2</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Goles recibidos Medio/Delantero</td>
        <td class="border px-3 py-2">Cada 2</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Tarjeta amarilla</td>
        <td class="border px-3 py-2">Indistintamente de la demarcaci√≥n</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Doble Amarilla</td>
        <td class="border px-3 py-2">Indistintamente de la demarcaci√≥n</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Tarjeta Roja</td>
        <td class="border px-3 py-2">Indistintamente de la demarcaci√≥n</td>
        <td class="border px-3 py-2">-3</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Paradas Portero</td>
        <td class="border px-3 py-2">Cada 2</td>
        <td class="border px-3 py-2">1</td>
      </tr>

      <!-- Bonus ataque -->
      <tr class="bg-gray-900 text-red-400 font-bold">
        <td colspan="3" class="border px-3 py-2 text-center">BONUS ATAQUE</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Tiros a puerta</td>
        <td class="border px-3 py-2">Cada 2</td>
        <td class="border px-3 py-2">1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Regates logrados</td>
        <td class="border px-3 py-2">Cada 2</td>
        <td class="border px-3 py-2">1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Balones al √°rea</td>
        <td class="border px-3 py-2">Cada 2</td>
        <td class="border px-3 py-2">1</td>
      </tr>

      <!-- Bonus defensivos -->
      <tr class="bg-gray-900 text-red-400 font-bold">
        <td colspan="3" class="border px-3 py-2 text-center">BONUS DEFENSIVOS</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Balones recuperados</td>
        <td class="border px-3 py-2">Cada 5</td>
        <td class="border px-3 py-2">1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Despejes</td>
        <td class="border px-3 py-2">Cada 3</td>
        <td class="border px-3 py-2">1</td>
      </tr>

      <!-- P√©rdidas -->
      <tr class="bg-gray-900 text-red-400 font-bold">
        <td colspan="3" class="border px-3 py-2 text-center">P√âRDIDAS DE BAL√ìN</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Balones perdidos portero</td>
        <td class="border px-3 py-2">Cada 8</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Balones perdidos defensa</td>
        <td class="border px-3 py-2">Cada 8</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Balones perdidos centrocampista</td>
        <td class="border px-3 py-2">Cada 10</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
      <tr class="odd:bg-gray-800">
        <td class="border px-3 py-2">Balones perdidos delantero</td>
        <td class="border px-3 py-2">Cada 12</td>
        <td class="border px-3 py-2">-1</td>
      </tr>
    </tbody>
  </table>
</div>

<section class="bg-gray-900 p-6 rounded-2xl shadow-lg space-y-6">
  <h2 class="text-3xl font-bold text-red-400 text-center">üî• Novedades</h2>

  <!-- Blindaje -->
  <div class="bg-gray-800 p-5 rounded-xl border border-red-600 hover:shadow-red-500/30 hover:shadow-lg transition">
    <h3 class="text-xl font-semibold text-red-300 mb-2">üõ°Ô∏è Nueva Funcionalidad: Blindaje</h3>
    <p class="text-gray-300 leading-relaxed">
      Ahora podr√°s <span class="text-white font-semibold">proteger a un jugador</span> cada jornada 
      para evitar que otro m√°nager pueda hacerte un <span class="italic">clausulazo</span> 
      o ficharlo para su equipo.
    </p>
  </div>

  <!-- Puntos DAZN -->
  <div class="bg-gray-800 p-5 rounded-xl border border-red-600 hover:shadow-red-500/30 hover:shadow-lg transition">
    <h3 class="text-xl font-semibold text-red-300 mb-2">‚öΩ Puntos DAZN</h3>
    <p class="text-gray-300 leading-relaxed">
      Son <span class="text-white font-semibold">puntos extra</span> que se otorgan a los jugadores al 
      final de cada partido. <br>
      Funcionan igual que los <span class="italic">puntos Relevo</span> de la temporada pasada.
    </p>
  </div>
</section>
</section>

  <!-- CALENDARIO -->


<section id="clasificacionLaLiga" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">
  <h2 class="text-2xl font-semibold mb-4 text-red-400">Clasificaci√≥n LaLiga</h2>
  
  <!-- Tabla de Clasificaci√≥n LALIGA -->
  <div class="overflow-x-auto">
    <table class="table-auto w-full text-center border border-gray-700 text-white">
      <thead class="bg-gray-800">
        <tr>
          <th class="px-2 py-1">Pos</th>
          <th class="px-2 py-1">Equipo</th>
          <th class="px-2 py-1">Puntos</th>
          <th class="px-2 py-1">Jugados</th>
          <th class="px-2 py-1">Ganados</th>
          <th class="px-2 py-1">Empates</th>
          <th class="px-2 py-1">Perdidos</th>
        </tr>
      </thead>
      <tbody id="tablaClasificacion"></tbody>
    </table>
  </div>
</section>

  <!-- ESTADISTICAS -->
    <section id="estadisticas" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">
     <h2 class="text-2xl font-semibold mb-4 text-red-400">Estadisticas proximamente ....</h2>
    </section>

    <!-- Clasificaci√≥n Final -->
    <section id="clasificacion" class="bg-gray-900 p-6 rounded-2xl shadow-lg">
     <h2 class="text-2xl font-semibold mb-4 text-red-400 flex items-center gap-2">
  Clasificaci√≥n Final
  <button onclick="toggleInfo()" class="text-white rounded-full w-6 h-6 flex items-center justify-center">
    ‚ÑπÔ∏è
  </button>
</h2>

<!-- Informaci√≥n oculta -->
<p id="infoClasificacion" class="hidden text-gray-300 bg-gray-800 p-3 rounded-lg mb-4">
  Tocando los titulares de la tabla se ordenan segun (Club alfabeticamente, puntos o dinero).
</p>

      
      <div class="overflow-x-auto">
        <table class="table-auto w-full text-center border border-gray-700 text-white" id="finalTable">
          <thead class="bg-gray-800">
            <tr>
              <th class="px-2 py-1 cursor-pointer" onclick="sortTable('name')">Club</th>
              <th class="px-2 py-1 cursor-pointer" onclick="sortTable('points')">Puntos</th>
              <th class="px-2 py-1 cursor-pointer" onclick="sortTable('money')">Dinero (‚Ç¨)</th>
            </tr>
          </thead>
          <tbody id="finalTableBody"></tbody>
        </table>
      </div>

      <!-- Bote Final -->
      <div class="mt-6 p-4 bg-red-600 rounded-lg text-white font-semibold text-lg">
        üí∞ Bote Final: <span id="boteFinal">0</span> ‚Ç¨
      </div>
    </section>

    <!-- Jornadas -->
    <section id="jornadas" class="bg-gray-900 p-6 rounded-2xl shadow-lg hidden">
     <h2 class="text-2xl font-semibold mb-4 text-red-400 flex items-center gap-2">
  Jornadas 
  <button onclick="toggleInfo2()" class="text-white rounded-full w-6 h-6 flex items-center justify-center">
    ‚ÑπÔ∏è
  </button>
</h2>

<!-- Informaci√≥n oculta -->
<p id="infoJornadas" class="hidden text-gray-300 bg-gray-800 p-3 rounded-lg mb-4">
  La tabla de puntacion actualizada se a√±adir√° 24h despu√©s del √∫ltimo partido disputado de la jornada.
</p>


      <!-- Paginaci√≥n -->
      <div class="flex flex-wrap gap-2 mb-4" id="pagination"></div>

      <!-- Tabla de la jornada -->
      <div class="overflow-x-auto">
        <table class="table-auto w-full text-center border border-gray-700 text-white">
          <thead class="bg-gray-800">
            <tr>
              <th>Club</th>
              <th>Puntos</th>
              <th>Dinero (‚Ç¨)</th>
            </tr>
          </thead>
          <tbody id="jornadaTableBody"></tbody>
        </table>
      </div>
    </section>

  </main>

  <script>
    // ==== CONFIGURACI√ìN DE DATOS MANUAL ====

    const clubs = [
      { name: "MrMaxi01" },
      { name: "su_florentineza123" },
      { name: "tonidiaz22" },
      { name: "Juanjonete04" },
      { name: "Kino04" },
      { name: "La Sergioneta CF" },
      { name: "Achoman" },
      { name: "Philip$" },
      { name: "Juanpm_43" },
      { name: "Rabovic" },
    ];

    // Datos por jornada (ejemplo)
    const jornadas = [
      [
        { club: "MrMaxi01", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "su_florentineza123", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "tonidiaz22", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Juanjonete04", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Kino04", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "La Sergioneta CF", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Achoman", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Philip$", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Juanpm_43", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Rabovic", puntos: 0, penalizacion: 0, dinero: 0 }        
      ],
      [
        { club: "MrMaxi01", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "su_florentineza123", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "tonidiaz22", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Juanjonete04", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Kino04", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "La Sergioneta CF", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Achoman", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Philip$", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Juanpm_43", puntos: 0, penalizacion: 0, dinero: 0 },
        { club: "Rabovic", puntos: 0, penalizacion: 0, dinero: 0 }        
      ],
    ];

    // ==== CLASIFICACI√ìN FINAL ====
    let clasificacion = clubs.map(c => ({
      name: c.name,
      puntosTotales: 0,
      dineroTotal: 0
    }));

    jornadas.forEach(jornada => {
      jornada.forEach(entry => {
        let club = clasificacion.find(c => c.name === entry.club);
        if (club) {
          club.puntosTotales += entry.puntos;
          club.dineroTotal += entry.dinero;
        }
      });
    });

    const finalTableBody = document.getElementById("finalTableBody");
    const boteFinalSpan = document.getElementById("boteFinal");

    function renderFinalTable(data) {
      finalTableBody.innerHTML = "";
      let totalBote = 0;
      data.forEach(club => {
        totalBote += club.dineroTotal;
        finalTableBody.innerHTML += `
          <tr class="border-t border-gray-700">
            <td class="py-1 text-center">${club.name}</td>
            <td class="py-1">${club.puntosTotales}</td>
            <td class="py-1">${club.dineroTotal}</td>
          </tr>
        `;
      });
      boteFinalSpan.textContent = totalBote;
    }

    renderFinalTable(clasificacion);

    // ==== ORDENAR TABLA FINAL ====
    function sortTable(by) {
      if (by === "name") clasificacion.sort((a,b) => a.name.localeCompare(b.name));
      if (by === "points") clasificacion.sort((a,b) => b.puntosTotales - a.puntosTotales);
      if (by === "money") clasificacion.sort((a,b) => b.dineroTotal - a.dineroTotal);
      renderFinalTable(clasificacion);
    }

    // ==== PAGINACI√ìN DE JORNADAS ====
    const pagination = document.getElementById("pagination");
    const jornadaTableBody = document.getElementById("jornadaTableBody");

    function renderPagination() {
      for (let i = 0; i < jornadas.length; i++) {
        const btn = document.createElement("button");
        btn.textContent = `J${i+1}`;
        btn.className = "px-2 py-1 bg-red-600 hover:bg-red-500 rounded";
        btn.onclick = () => renderJornada(i);
        pagination.appendChild(btn);
      }
    }

    function renderJornada(index) {
      jornadaTableBody.innerHTML = "";
      jornadas[index].forEach(entry => {
        const rowClass = entry.penalizacion > 0 ? "bg-red-900" : "";
        jornadaTableBody.innerHTML += `
          <tr class="border-t border-gray-700 ${rowClass}">
            <td class="py-1">${entry.club}</td>
            <td class="py-1">${entry.puntos}</td>
            <td class="py-1">${entry.dinero}</td>
          </tr>
        `;
      });
    }

    renderPagination();
    renderJornada(0);

    // ==== MOSTRAR SECCIONES SEG√öN MEN√ö ====
    function showSection(section) {
  const sections = ["clasificacion", "jornadas", "reglamento", "calendario"];
  sections.forEach(id => document.getElementById(id).classList.add("hidden"));
  document.getElementById(section).classList.remove("hidden");
}


function toggleInfo2() {
  const info = document.getElementById("infoJornadas");
  info.classList.toggle("hidden");
}
function toggleInfo() {
  const info = document.getElementById("infoClasificacion");
  info.classList.toggle("hidden");
}
// ==== Tabla API SPORTS 2.0 ====

async function cargarClasificacion() {
  try {
    const respuesta = await fetch("https://v3.football.api-sports.io/standings?league=140&season=2023", {
      headers: {
        "x-rapidapi-key": "3293e65ec5f775049e124ee3810d46da",
        "x-rapidapi-host": "v3.football.api-sports.io"
      }
    });

    if (!respuesta.ok) throw new Error(`HTTP error: ${respuesta.status}`);

    const datos = await respuesta.json();
    console.log(datos); // Para comprobar la estructura

    const tabla = datos.response[0].league.standings[0];
    const tbody = document.getElementById("tablaClasificacion");
    tbody.innerHTML = "";

    tabla.forEach((equipo, i) => {
      tbody.innerHTML += `
        <tr class="border-t border-gray-700">
          <td class="py-1">${i+1}</td>
          <td class="py-1 flex items-center gap-2 justify-center">
            <img src="${equipo.team.logo}" alt="${equipo.team.name}" class="h-6 w-6">
            ${equipo.team.name}
          </td>
          <td class="py-1">${equipo.points}</td>
          <td class="py-1">${equipo.all.played}</td>
          <td class="py-1">${equipo.all.win}</td>
          <td class="py-1">${equipo.all.draw}</td>
          <td class="py-1">${equipo.all.lose}</td>
        </tr>
      `;
    });
  } catch (error) {
    console.error("Error cargando la clasificaci√≥n:", error);
  }
}

cargarClasificacion();


function toggleMenu() {
  const menu = document.getElementById("dropdownMenu");
  menu.classList.toggle("hidden");
}

// Cierra el men√∫ si clicas fuera
document.addEventListener("click", function(event) {
  const menu = document.getElementById("dropdownMenu");
  if (!event.target.closest("nav")) {
    menu.classList.add("hidden");
  }
});

// Muestra la secci√≥n y cierra el men√∫
function showSection(section, btn) {
  const sections = ["clasificacion", "jornadas", "reglamento", "estadisticas","clasificacionLaLiga"];
  
  // Oculta todas las secciones
  sections.forEach(id => document.getElementById(id).classList.add("hidden"));
  document.getElementById(section).classList.remove("hidden");

  // Cierra el men√∫ desplegable despu√©s de elegir
  document.getElementById("dropdownMenu").classList.add("hidden");
}
  </script>
</body>
</html>
